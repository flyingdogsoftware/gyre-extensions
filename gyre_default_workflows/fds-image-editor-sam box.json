{"last_node_id":88,"last_link_id":137,"nodes":[{"id":10,"type":"LoadImage","pos":[19,291],"size":{"0":315,"1":314},"flags":{},"order":0,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[115,127],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["example (2).webp","image"]},{"id":78,"type":"SAMDetectorCombined","pos":[925,662],"size":{"0":315,"1":218},"flags":{},"order":4,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":114,"slot_index":0},{"name":"segs","type":"SEGS","link":137},{"name":"image","type":"IMAGE","link":115}],"outputs":[{"name":"MASK","type":"MASK","links":[128],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SAMDetectorCombined"},"widgets_values":["none",0,0.93,0,0.7000000000000001,"False"]},{"id":54,"type":"SaveImage","pos":[2241,168],"size":{"0":408.48504638671875,"1":538.2918090820312},"flags":{},"order":11,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":93}],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":12,"type":"MaskToImage","pos":[1639,496],"size":{"0":210,"1":26},"flags":{},"order":8,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":135}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[94],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":49,"type":"JoinImageWithAlpha","pos":[2004,502],"size":{"0":210,"1":46},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":95},{"name":"alpha","type":"MASK","link":55}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[93],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"JoinImageWithAlpha"}},{"id":69,"type":"Images to RGB","pos":[1833,354],"size":{"0":210,"1":26},"flags":{},"order":9,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":94}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[95],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Images to RGB"}},{"id":53,"type":"LayerMask: MaskInvert","pos":[1729,625],"size":{"0":210,"1":26},"flags":{},"order":7,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":134}],"outputs":[{"name":"mask","type":"MASK","links":[55],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LayerMask: MaskInvert"}},{"id":76,"type":"SaveImage","pos":[2251,766],"size":{"0":366.1251220703125,"1":365.09173583984375},"flags":{},"order":6,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":129}],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":79,"type":"SAMLoader","pos":[393,763],"size":{"0":315,"1":82},"flags":{},"order":1,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[114],"shape":3}],"properties":{"Node name for S&R":"SAMLoader"},"widgets_values":["sam_vit_b_01ec64.pth","AUTO"]},{"id":84,"type":"LayerMask: MaskEdgeUltraDetail V2","pos":[1296,656],"size":{"0":315,"1":294},"flags":{},"order":5,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":127},{"name":"mask","type":"MASK","link":128}],"outputs":[{"name":"image","type":"IMAGE","links":[129],"shape":3,"slot_index":0},{"name":"mask","type":"MASK","links":[134,135],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LayerMask: MaskEdgeUltraDetail V2"},"widgets_values":["PyMatting",0,0,0.75,6,6,0.01,0.99,"cuda",2]},{"id":22,"type":"LoadText|pysssss","pos":[-17,842],"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[136],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoadText|pysssss"},"widgets_values":["input","test2.txt"]},{"id":88,"type":"Gyre_JSONBoxes To SEGS","pos":[370,971],"size":[315,58],"flags":{},"order":3,"mode":0,"inputs":[{"name":"json_string","type":"STRING","link":136,"widget":{"name":"json_string"}}],"outputs":[{"name":"SEGS","type":"SEGS","links":[137],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Gyre_JSONBoxes To SEGS"},"widgets_values":[""]}],"links":[[55,53,0,49,1,"MASK"],[93,49,0,54,0,"IMAGE"],[94,12,0,69,0,"IMAGE"],[95,69,0,49,0,"IMAGE"],[114,79,0,78,0,"SAM_MODEL"],[115,10,0,78,2,"IMAGE"],[127,10,0,84,0,"IMAGE"],[128,78,0,84,1,"MASK"],[129,84,0,76,0,"IMAGE"],[134,84,1,53,0,"MASK"],[135,84,1,12,0,"MASK"],[136,22,0,88,0,"STRING"],[137,88,0,78,1,"SEGS"]],"groups":[],"config":{},"extra":{"workspace_info":[],"gyre":{"lastModified":1721603620453,"lastModifiedReadable":"2024-07-21 23:13:40","tags":["Other"],"combo_values":{},"license":"yes_commercial","forms":{"default":{"elements":[{"name":"currentLayer","type":"layer_image","label":"Value_6y0om","options":[],"default":""},{"name":"json_file","type":"file","label":"File","default":""},{"name":"erode_kernel_size","label":"Erode kernel size","default":3,"type":"slider","min":1,"max":20,"step":1},{"name":"dilate_kernel_size","label":"Dilate kernel size","default":3,"type":"slider","min":1,"max":20,"step":1}]}},"mappings":{"10":[{"fromField":"currentLayer","toField":"image","toIndex":0}],"22":[{"fromField":"json_file","toField":"file","toIndex":1}],"54":[{"fromField":"resultImage","toField":"filename_prefix","toIndex":0}],"76":[{"fromField":"resultImage","toField":"filename_prefix","toIndex":0}],"84":[{"fromField":"erode_kernel_size","toField":"edge_erode","toIndex":4},{"fromField":"dilate_kernel_size","toField":"edte_dilate","toIndex":5}]},"category":"Filter","nodeWidgets":{"2":[{"type":"number","name":"blur_radius","value":1,"options":{"min":1,"max":31,"step":10,"round":1,"precision":0},"last_y":26},{"type":"number","name":"sigma","value":1,"options":{"min":0.1,"max":10,"step":1,"round":0.1,"precision":1},"last_y":50}],"3":[{"type":"combo","name":"image","value":"0y6u8","options":{"values":[]},"_real_value":"0y6u8","last_y":46},{"type":"button","name":"upload","value":"image","options":{},"label":"choose file to upload","serialize":false,"last_y":70}],"4":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"5":[{"type":"combo","name":"model_name","value":"sam_vit_b_01ec64.pth","options":{"values":["sam_vit_b_01ec64.pth"]},"last_y":26},{"type":"combo","name":"device_mode","value":"AUTO","options":{"values":["AUTO","Prefer GPU","CPU"]},"last_y":50}],"7":[{"type":"combo","name":"model_name","value":"groundingdino_swint_ogc.pth","options":{"values":["groundingdino_swint_ogc.pth"]},"last_y":26},{"type":"combo","name":"device_mode","value":"AUTO","options":{"values":["AUTO","Prefer GPU","CPU"]},"last_y":50}],"8":[{"type":"text","name":"caption","value":"person","options":{},"last_y":46}],"10":[{"type":"combo","name":"image","value":"example (2).webp","options":{"values":[]},"_real_value":"example (2).webp","last_y":46},{"type":"button","name":"upload","value":"image","options":{},"label":"choose file to upload","serialize":false,"last_y":70}],"13":[{"type":"text","name":"json_str","value":"","options":{},"last_y":26}],"22":[{"type":"combo","name":"root_dir","value":"input","options":{"values":["input","output","temp"]},"last_y":26},{"type":"combo","name":"file","value":"test2.txt","options":{"values":["points.txt","test.txt","test2.txt"]},"disabled":false,"last_y":50}],"24":[{"type":"customtext","name":"text","value":"{\n    \"xyxy\": [\n        [\n            635.06,\n            104.94,\n            1819.4,\n            1611.4\n        ]\n    ],\n    \"mask\": null,\n    \"confidence\": [\n        0.94542\n    ],\n    \"class_id\": null,\n    \"tracker_id\": null\n}","element":{},"options":{"hideOnZoom":true,"selectOn":["focus","click"]},"inputEl":{},"dynamicPrompts":true,"last_y":26,"computedHeight":174,"y":26}],"25":[{"type":"converted-widget","name":"text","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"27":[{"type":"converted-widget","name":"text","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"28":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"32":[{"type":"combo","name":"root_dir","value":"input","options":{"values":["input","output","temp"]},"last_y":26},{"type":"combo","name":"file","value":"points.txt","options":{"values":["points.txt","test.txt","test2.txt"]},"disabled":false,"last_y":50}],"34":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":46}],"35":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"54":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"70":[{"type":"combo","name":"model_name","value":"ViTMatte_B_DIS.pth","options":{"values":["ViTMatte_B_DIS.pth","sam_vit_h_4b8939.pth"]},"last_y":26},{"type":"combo","name":"device_mode","value":"AUTO","options":{"values":["AUTO","Prefer GPU","CPU"]},"last_y":50}],"72":[{"type":"number","name":"erode_kernel_size","value":3,"options":{"min":1,"max":2048,"step":10,"round":1,"precision":0},"last_y":46},{"type":"number","name":"dilate_kernel_size","value":3,"options":{"min":1,"max":2048,"step":10,"round":1,"precision":0},"last_y":70}],"76":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"77":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"78":[{"type":"combo","name":"detection_hint","value":"none","options":{"values":["center-1","horizontal-2","vertical-2","rect-4","diamond-4","mask-area","mask-points","mask-point-bbox","none"]},"last_y":66},{"type":"number","name":"dilation","value":0,"options":{"min":-512,"max":512,"step":10,"round":1,"precision":0},"last_y":90},{"type":"number","name":"threshold","value":0.93,"options":{"min":0,"max":1,"step":0.1,"round":0.01,"precision":2},"last_y":114},{"type":"number","name":"bbox_expansion","value":0,"options":{"min":0,"max":1000,"step":10,"round":1,"precision":0},"last_y":138},{"type":"number","name":"mask_hint_threshold","value":0.7000000000000001,"options":{"min":0,"max":1,"step":0.1,"round":0.01,"precision":2},"last_y":162},{"type":"combo","name":"mask_hint_use_negative","value":"False","options":{"values":["False","Small","Outter"]},"last_y":186}],"79":[{"type":"combo","name":"model_name","value":"sam_vit_b_01ec64.pth","options":{"values":["sam_vit_b_01ec64.pth","ESAM"]},"last_y":26},{"type":"combo","name":"device_mode","value":"AUTO","options":{"values":["AUTO","Prefer GPU","CPU"]},"last_y":50}],"84":[{"type":"combo","name":"method","value":"PyMatting","options":{"values":["VITMatte","VITMatte(local)","PyMatting","GuidedFilter"]},"last_y":46},{"type":"number","name":"mask_grow","value":0,"options":{"min":0,"max":256,"step":10,"round":1,"precision":0},"last_y":70},{"type":"number","name":"fix_gap","value":0,"options":{"min":0,"max":32,"step":10,"round":1,"precision":0},"last_y":94},{"type":"number","name":"fix_threshold","value":0.75,"options":{"min":0.01,"max":0.99,"step":0.1,"round":0.01,"precision":2},"last_y":118},{"type":"number","name":"edge_erode","value":6,"options":{"min":1,"max":255,"step":10,"round":1,"precision":0},"last_y":142},{"type":"number","name":"edte_dilate","value":6,"options":{"min":1,"max":255,"step":10,"round":1,"precision":0},"last_y":166},{"type":"slider","name":"black_point","value":0.01,"options":{"min":0.01,"max":0.98,"step":0.1,"round":0.01,"precision":2},"last_y":190},{"type":"slider","name":"white_point","value":0.99,"options":{"min":0.02,"max":0.99,"step":0.1,"round":0.01,"precision":2},"last_y":214},{"type":"combo","name":"device","value":"cuda","options":{"values":["cuda","cpu"]},"last_y":238},{"type":"number","name":"max_megapixels","value":2,"options":{"min":1,"max":999,"step":1,"round":0.1,"precision":1},"last_y":262}],"88":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":26}]},"workflowid":"4qok1pcuw6","selected_combo_values":[],"models":[],"virtualNodes":[]},"ds":{"scale":1.3310000000000004,"offset":{"0":73.86139599708396,"1":-98.28813161953036}}},"version":0.4}