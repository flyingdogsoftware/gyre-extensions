{"last_node_id":79,"last_link_id":116,"nodes":[{"id":75,"type":"SAM Model Loader","pos":[474,511],"size":{"0":315,"1":58},"flags":{},"order":0,"mode":0,"outputs":[{"name":"SAM_MODEL","type":"SAM_MODEL","links":[105],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"SAM Model Loader"},"widgets_values":["ViT-B"]},{"id":73,"type":"SAM Image Mask","pos":[922,621],"size":{"0":254.40000915527344,"1":66},"flags":{},"order":4,"mode":0,"inputs":[{"name":"sam_model","type":"SAM_MODEL","link":105,"slot_index":0},{"name":"sam_parameters","type":"SAM_PARAMETERS","link":116},{"name":"image","type":"IMAGE","link":107}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":[110],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"SAM Image Mask"}},{"id":12,"type":"MaskToImage","pos":[1551,642],"size":{"0":210,"1":26},"flags":{},"order":7,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":112}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[94],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"MaskToImage"}},{"id":69,"type":"Images to RGB","pos":[1810,520],"size":{"0":210,"1":26},"flags":{},"order":9,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":94}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[95],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Images to RGB"}},{"id":49,"type":"JoinImageWithAlpha","pos":[2051,566],"size":{"0":210,"1":46},"flags":{},"order":10,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":95},{"name":"alpha","type":"MASK","link":55}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[93],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"JoinImageWithAlpha"}},{"id":53,"type":"LayerMask: MaskInvert","pos":[1832,700],"size":{"0":210,"1":26},"flags":{},"order":8,"mode":0,"inputs":[{"name":"mask","type":"MASK","link":113}],"outputs":[{"name":"mask","type":"MASK","links":[55],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LayerMask: MaskInvert"}},{"id":78,"type":"SaveImage","pos":[2285,789],"size":{"0":315,"1":270},"flags":{},"order":6,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":111}],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":10,"type":"LoadImage","pos":[19,291],"size":{"0":315,"1":314},"flags":{},"order":1,"mode":0,"outputs":[{"name":"IMAGE","type":"IMAGE","links":[107,114],"shape":3,"slot_index":0},{"name":"MASK","type":"MASK","links":null,"shape":3}],"properties":{"Node name for S&R":"LoadImage"},"widgets_values":["example (2).webp","image"]},{"id":54,"type":"SaveImage","pos":[2276,410],"size":{"0":332.0611572265625,"1":312.35845947265625},"flags":{},"order":11,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":93}],"properties":{"Node name for S&R":"SaveImage"},"widgets_values":["ComfyUI"]},{"id":77,"type":"LayerMask: MaskEdgeUltraDetail V2","pos":[1206,720],"size":{"0":315,"1":294},"flags":{},"order":5,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":114},{"name":"mask","type":"MASK","link":110}],"outputs":[{"name":"image","type":"IMAGE","links":[111],"shape":3,"slot_index":0},{"name":"mask","type":"MASK","links":[112,113],"shape":3,"slot_index":1}],"properties":{"Node name for S&R":"LayerMask: MaskEdgeUltraDetail V2"},"widgets_values":["PyMatting",0,0,0.75,6,6,0.01,0.99,"cuda",2]},{"id":22,"type":"LoadText|pysssss","pos":[-17,842],"size":{"0":315,"1":82},"flags":{},"order":2,"mode":0,"outputs":[{"name":"STRING","type":"STRING","links":[115],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"LoadText|pysssss"},"widgets_values":["input","points.txt"]},{"id":79,"type":"Gyre_JSONPoints SAM Parameters","pos":[511.58838453225064,911.3726000140052],"size":[315,58],"flags":{},"order":3,"mode":0,"inputs":[{"name":"json_string","type":"STRING","link":115,"widget":{"name":"json_string"}}],"outputs":[{"name":"SAM_PARAMETERS","type":"SAM_PARAMETERS","links":[116],"shape":3,"slot_index":0}],"properties":{"Node name for S&R":"Gyre_JSONPoints SAM Parameters"},"widgets_values":[""]}],"links":[[55,53,0,49,1,"MASK"],[93,49,0,54,0,"IMAGE"],[94,12,0,69,0,"IMAGE"],[95,69,0,49,0,"IMAGE"],[105,75,0,73,0,"SAM_MODEL"],[107,10,0,73,2,"IMAGE"],[110,73,1,77,1,"MASK"],[111,77,0,78,0,"IMAGE"],[112,77,1,12,0,"MASK"],[113,77,1,53,0,"MASK"],[114,10,0,77,0,"IMAGE"],[115,22,0,79,0,"STRING"],[116,79,0,73,1,"SAM_PARAMETERS"]],"groups":[],"config":{},"extra":{"workspace_info":[],"gyre":{"lastModified":1721603927172,"lastModifiedReadable":"2024-07-21 23:18:47","tags":["Other"],"combo_values":{},"license":"yes_commercial","forms":{"default":{"elements":[{"name":"currentLayer","type":"layer_image","label":"Value_6y0om","options":[],"default":""},{"name":"json_file","type":"file","label":"File","default":""}]}},"mappings":{"10":[{"fromField":"currentLayer","toField":"image","toIndex":0}],"22":[{"fromField":"json_file","toField":"file","toIndex":1}],"54":[{"fromField":"resultImage","toField":"filename_prefix","toIndex":0}],"78":[{"fromField":"resultImage","toField":"filename_prefix","toIndex":0}]},"category":"Filter","nodeWidgets":{"2":[{"type":"number","name":"blur_radius","value":1,"options":{"min":1,"max":31,"step":10,"round":1,"precision":0},"last_y":26},{"type":"number","name":"sigma","value":1,"options":{"min":0.1,"max":10,"step":1,"round":0.1,"precision":1},"last_y":50}],"3":[{"type":"combo","name":"image","value":"0y6u8","options":{"values":[]},"_real_value":"0y6u8","last_y":46},{"type":"button","name":"upload","value":"image","options":{},"label":"choose file to upload","serialize":false,"last_y":70}],"4":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"5":[{"type":"combo","name":"model_name","value":"sam_vit_b_01ec64.pth","options":{"values":["sam_vit_b_01ec64.pth"]},"last_y":26},{"type":"combo","name":"device_mode","value":"AUTO","options":{"values":["AUTO","Prefer GPU","CPU"]},"last_y":50}],"7":[{"type":"combo","name":"model_name","value":"groundingdino_swint_ogc.pth","options":{"values":["groundingdino_swint_ogc.pth"]},"last_y":26},{"type":"combo","name":"device_mode","value":"AUTO","options":{"values":["AUTO","Prefer GPU","CPU"]},"last_y":50}],"8":[{"type":"text","name":"caption","value":"person","options":{},"last_y":46}],"10":[{"type":"combo","name":"image","value":"example (2).webp","options":{"values":[]},"_real_value":"example (2).webp","last_y":46},{"type":"button","name":"upload","value":"image","options":{},"label":"choose file to upload","serialize":false,"last_y":70}],"13":[{"type":"text","name":"json_str","value":"","options":{},"last_y":26}],"22":[{"type":"combo","name":"root_dir","value":"input","options":{"values":["input","output","temp"]},"last_y":26},{"type":"combo","name":"file","value":"points.txt","options":{"values":["points.txt","test.txt","test2.txt"]},"disabled":false,"last_y":50}],"24":[{"type":"customtext","name":"text","value":"{\n    \"xyxy\": [\n        [\n            635.06,\n            104.94,\n            1819.4,\n            1611.4\n        ]\n    ],\n    \"mask\": null,\n    \"confidence\": [\n        0.94542\n    ],\n    \"class_id\": null,\n    \"tracker_id\": null\n}","element":{},"options":{"hideOnZoom":true,"selectOn":["focus","click"]},"inputEl":{},"dynamicPrompts":true,"last_y":26,"computedHeight":174,"y":26}],"25":[{"type":"converted-widget","name":"text","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"27":[{"type":"converted-widget","name":"text","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"28":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"32":[{"type":"combo","name":"root_dir","value":"input","options":{"values":["input","output","temp"]},"last_y":26},{"type":"combo","name":"file","value":"points.txt","options":{"values":["points.txt","test.txt","test2.txt"]},"disabled":false,"last_y":50}],"34":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":46}],"35":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"54":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"70":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":46}],"72":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":26}],"75":[{"type":"combo","name":"model_size","value":"ViT-B","options":{"values":["ViT-H","ViT-L","ViT-B"]},"last_y":26}],"77":[{"type":"combo","name":"method","value":"PyMatting","options":{"values":["VITMatte","VITMatte(local)","PyMatting","GuidedFilter"]},"last_y":46},{"type":"number","name":"mask_grow","value":0,"options":{"min":0,"max":256,"step":10,"round":1,"precision":0},"last_y":70},{"type":"number","name":"fix_gap","value":0,"options":{"min":0,"max":32,"step":10,"round":1,"precision":0},"last_y":94},{"type":"number","name":"fix_threshold","value":0.75,"options":{"min":0.01,"max":0.99,"step":0.1,"round":0.01,"precision":2},"last_y":118},{"type":"number","name":"edge_erode","value":6,"options":{"min":1,"max":255,"step":10,"round":1,"precision":0},"last_y":142},{"type":"number","name":"edte_dilate","value":6,"options":{"min":1,"max":255,"step":10,"round":1,"precision":0},"last_y":166},{"type":"slider","name":"black_point","value":0.01,"options":{"min":0.01,"max":0.98,"step":0.1,"round":0.01,"precision":2},"last_y":190},{"type":"slider","name":"white_point","value":0.99,"options":{"min":0.02,"max":0.99,"step":0.1,"round":0.01,"precision":2},"last_y":214},{"type":"combo","name":"device","value":"cuda","options":{"values":["cuda","cpu"]},"last_y":238},{"type":"number","name":"max_megapixels","value":2,"options":{"min":1,"max":999,"step":1,"round":0.1,"precision":1},"last_y":262}],"78":[{"type":"text","name":"filename_prefix","value":"ComfyUI","options":{},"last_y":26}],"79":[{"type":"converted-widget","name":"json_string","value":"","options":{"forceInput":true},"origType":"text","last_y":26.000020027160645}]},"workflowid":"pfrv11hn9d","selected_combo_values":[],"models":[],"virtualNodes":[]},"ds":{"scale":1.3310000000000004,"offset":{"0":219.89173313949505,"1":-153.5964643107044}}},"version":0.4}