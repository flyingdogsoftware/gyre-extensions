var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function s(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function u(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function g(t){return document.createTextNode(t)}function f(){return g(" ")}function h(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function p(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function m(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:p(t,e,n)}function y(t,e){e=""+e,t.data!==e&&(t.data=e)}function x(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function b(t){const e={};for(const n of t)e[n.name]=n.value;return e}let w;function $(t){w=t}function v(){if(!w)throw new Error("Function called outside component initialization");return w}const _=[],k=[];let S=[];const z=[],E=Promise.resolve();let C=!1;function I(t){S.push(t)}const L=new Set;let T=0;function A(){if(0!==T)return;const t=w;do{try{for(;T<_.length;){const t=_[T];T++,$(t),R(t.$$)}}catch(t){throw _.length=0,T=0,t}for($(null),_.length=0,T=0;k.length;)k.pop()();for(let t=0;t<S.length;t+=1){const e=S[t];L.has(e)||(L.add(e),e())}S.length=0}while(_.length);for(;z.length;)z.pop()();C=!1,L.clear(),$(t)}function R(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(I)}}const F=new Set;function M(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];S.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),S=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function B(t,e){-1===t.$$.dirty[0]&&(_.push(t),C||(C=!0,E.then(A)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function P(i,a,l,c,d,u,g,f=[-1]){const h=w;$(i);const p=i.$$={fragment:null,ctx:[],props:u,update:t,not_equal:d,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(h?h.$$.context:[])),callbacks:n(),dirty:f,skip_bound:!1,root:a.target||h.$$.root};g&&g(p.root);let m=!1;if(p.ctx=l?l(i,a.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return p.ctx&&d(p.ctx[t],p.ctx[t]=o)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](o),m&&B(i,t)),e})):[],p.update(),m=!0,o(p.before_update),p.fragment=!!c&&c(p.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);p.fragment&&p.fragment.l(t),t.forEach(s)}else p.fragment&&p.fragment.c();a.intro&&((y=i.$$.fragment)&&y.i&&(F.delete(y),y.i(x))),function(t,n,i,a){const{fragment:l,after_update:s}=t.$$;l&&l.m(n,i),a||I((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),s.forEach(I)}(i,a.target,a.anchor,a.customElement),A()}var y,x;$(h)}let N;function D(t){const e=e=>{!t||t.contains(e.target)||e.defaultPrevented||t.dispatchEvent(new CustomEvent("click_outside",t))};return document.addEventListener("click",e,!0),{destroy(){document.removeEventListener("click",e,!0)}}}function U(t,e,n){const o=t.slice();return o[20]=e[n],o}function H(t){let e,n,r,i,c,u,b,w,$,v,_,k=t[0].font_size+"";return{c(){e=d("div"),n=g("Text |\n            Font Size: "),r=d("span"),i=g(k),c=f(),u=d("fds-image-editor-slider"),w=f(),$=d("fds-image-editor-button"),$.textContent="Text/Font...",p(r,"class","values3"),x(r,"display","inline-block"),x(r,"margin-right","10px"),m(u,"class","slider"),m(u,"min","50"),m(u,"max","900"),m(u,"value",b=t[0].font_size),x(u,"margin-right","20px"),m($,"type","button"),x(e,"display","flex"),x(e,"align-items","center")},m(o,s){l(o,e,s),a(e,n),a(e,r),a(r,i),a(e,c),a(e,u),a(e,w),a(e,$),v||(_=[h(u,"input",t[8]),h($,"click",t[9])],v=!0)},p(t,e){1&e&&k!==(k=t[0].font_size+"")&&y(i,k),1&e&&b!==(b=t[0].font_size)&&m(u,"value",b)},d(t){t&&s(e),v=!1,o(_)}}}function O(e){let n,i,u,b,w,$,v,_,k,S,z,E,C,I,L,T,A,R,F,M,B,P,N,H,O,j,J,V,W,G,X,Y=e[0].font+"",K=e[0].letter_spacing+"",Q=e[3],Z=[];for(let t=0;t<Q.length;t+=1)Z[t]=q(U(e,Q,t));return{c(){n=d("div"),i=d("div"),u=d("button"),b=g(Y),w=f(),$=d("div");for(let t=0;t<Z.length;t+=1)Z[t].c();v=f(),_=d("div"),k=g("Letter Spacing: "),S=d("span"),z=g(K),E=f(),C=d("div"),I=d("fds-image-editor-slider"),T=f(),A=d("div"),R=d("fds-image-editor-button"),M=f(),B=d("fds-image-editor-button"),N=f(),H=d("fds-image-editor-button"),j=f(),J=d("div"),V=d("textarea"),p(u,"class","font-preview"),x(u,"font-family",e[0].font),p($,"id","myDropdown"),p($,"class","dropdown-content"),p(i,"class","dropdown"),p(S,"class","values3"),x(_,"margin-top","16px"),m(I,"min","-2"),m(I,"max","8"),m(I,"step","0.1"),m(I,"value",L=e[0].letter_spacing),m(I,"style",""),x(C,"margin-top","6px"),m(R,"icon","bold"),m(R,"title","Bold"),m(R,"state",F=e[0].bold?"active":""),m(B,"icon","italic"),m(B,"title","Italic"),m(B,"state",P=e[0].italic?"active":""),m(H,"icon","underline"),m(H,"title","Underline"),m(H,"state",O=e[0].underline?"active":""),p(A,"class","buttoncontainer"),p(V,"class","formInput"),x(V,"height","100px"),x(V,"font-size","20px"),x(V,"font-family",e[0].font),V.value=W=e[0].string,p(J,"class","formLine"),p(n,"class","editText")},m(o,s){l(o,n,s),a(n,i),a(i,u),a(u,b),a(i,w),a(i,$);for(let t=0;t<Z.length;t+=1)Z[t]&&Z[t].m($,null);var c;e[12]($),a(n,v),a(n,_),a(_,k),a(_,S),a(S,z),a(n,E),a(n,C),a(C,I),a(n,T),a(n,A),a(A,R),a(A,M),a(A,B),a(A,N),a(A,H),a(n,j),a(n,J),a(J,V),G||(X=[h(u,"click",e[10]),(c=D.call(null,i),c&&r(c.destroy)?c.destroy:t),h(i,"click_outside",e[5]),h(I,"input",e[13]),h(R,"click",e[14]),h(B,"click",e[15]),h(H,"click",e[16]),h(V,"change",e[17])],G=!0)},p(t,e){if(1&e&&Y!==(Y=t[0].font+"")&&y(b,Y),1&e&&x(u,"font-family",t[0].font),25&e){let n;for(Q=t[3],n=0;n<Q.length;n+=1){const o=U(t,Q,n);Z[n]?Z[n].p(o,e):(Z[n]=q(o),Z[n].c(),Z[n].m($,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=Q.length}1&e&&K!==(K=t[0].letter_spacing+"")&&y(z,K),1&e&&L!==(L=t[0].letter_spacing)&&m(I,"value",L),1&e&&F!==(F=t[0].bold?"active":"")&&m(R,"state",F),1&e&&P!==(P=t[0].italic?"active":"")&&m(B,"state",P),1&e&&O!==(O=t[0].underline?"active":"")&&m(H,"state",O),1&e&&x(V,"font-family",t[0].font),1&e&&W!==(W=t[0].string)&&(V.value=W)},d(t){t&&s(n),c(Z,t),e[12](null),G=!1,o(X)}}}function q(e){let n,o,r,i,c=e[20]+"";return{c(){n=d("a"),o=g(c),p(n,"href","#"),x(n,"font-family",e[20])},m(t,s){l(t,n,s),a(n,o),r||(i=h(n,"click",e[11]),r=!0)},p:t,d(t){t&&s(n),r=!1,i()}}}function j(e){let n,o,r=e[0]&&H(e),i=e[2]&&e[0]&&O(e);return{c(){n=d("div"),r&&r.c(),o=f(),i&&i.c(),this.c=t,p(n,"class","show")},m(t,e){l(t,n,e),r&&r.m(n,null),a(n,o),i&&i.m(n,null)},p(t,[e]){t[0]?r?r.p(t,e):(r=H(t),r.c(),r.m(n,o)):r&&(r.d(1),r=null),t[2]&&t[0]?i?i.p(t,e):(i=O(t),i.c(),i.m(n,null)):i&&(i.d(1),i=null)},i:t,o:t,d(t){t&&s(n),r&&r.d(),i&&i.d()}}}function J(t,e,n){let o,r,i=v(),{layer:a={font_size:150,letter_spacing:1,bold:!1,italic:!1,underline:!1}}=e;function l(t,e){i.dispatchEvent(new CustomEvent("change",{detail:{name:t,value:e}}))}function s(){o.classList.toggle("show")}return t.$$set=t=>{"layer"in t&&n(0,a=t.layer)},t.$$.update=()=>{1&t.$$.dirty&&a&&n(0,a)},[a,o,r,["Montez","Lobster","Josefin Sans","Shadows Into Light","Pacifico","Amatic SC","Orbitron","Rokkitt","Righteous","Dancing Script","Bangers","Chewy","Sigmar One","Architects Daughter","Abril Fatface","Covered By Your Grace","Kaushan Script","Gloria Hallelujah","Satisfy","Lobster Two","Comfortaa","Cinzel","Courgette"],l,function(){o.classList.remove("show")},s,function(){n(0,a)},t=>{n(0,a.font_size=t.target.value,a),n(0,a),l("change","font_size")},()=>{n(2,r=!r)},()=>{s()},t=>{n(0,a.font=t.target.text,a),n(0,a),l("change","font")},function(t){k[t?"unshift":"push"]((()=>{o=t,n(1,o)}))},t=>{n(0,a.letter_spacing=t.target.value,a),n(0,a),l("change","letter_spacing")},()=>{n(0,a.bold=!a.bold,a),l("change","font_weight")},()=>{n(0,a.italic=!a.italic,a),l("change","font_style")},()=>{n(0,a.underline=!a.underline,a),l("change","text_decoration")},t=>{n(0,a.string=t.target.value,a),n(0,a),l("change","text")}]}"function"==typeof HTMLElement&&(N=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){M(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function V(t,e,n){const o=t.slice();return o[36]=e[n],o[38]=n,o}function W(t){let e,n,o,r,i,c,d=t[36]+"";return{c(){e=u("tspan"),n=g(d),p(e,"x",o=t[8]/2),p(e,"y",r=t[7]/2),p(e,"dy",i=t[11]+t[10]*t[38]+"px"),p(e,"text-anchor",c=t[2].align)},m(t,o){l(t,e,o),a(e,n)},p(t,a){512&a[0]&&d!==(d=t[36]+"")&&y(n,d),256&a[0]&&o!==(o=t[8]/2)&&p(e,"x",o),128&a[0]&&r!==(r=t[7]/2)&&p(e,"y",r),3072&a[0]&&i!==(i=t[11]+t[10]*t[38]+"px")&&p(e,"dy",i),4&a[0]&&c!==(c=t[2].align)&&p(e,"text-anchor",c)},d(t){t&&s(e)}}}function G(e){let n,o,r,i,d,g=e[9],f=[];for(let t=0;t<g.length;t+=1)f[t]=W(V(e,g,t));return{c(){n=u("svg"),o=u("defs"),r=u("text");for(let t=0;t<f.length;t+=1)f[t].c();this.c=t,p(r,"id","text"),p(r,"x","0"),p(r,"y",i=e[7]/2),x(r,"text-decoration",e[6]),x(r,"font-style",e[5]),x(r,"font-weight",e[4]),x(r,"font-size",e[2].font_size+"px"),x(r,"font-family","'"+e[2].font+"'"),x(r,"letter-spacing",e[2].letter_spacing+"rem"),p(r,"dominant-baseline","middle"),p(n,"width",e[0]),p(n,"height",e[1]),x(n,"background",e[2].background),p(n,"viewBox",d="0 0 "+e[8]+" "+e[7])},m(t,i){l(t,n,i),a(n,o),a(n,r);for(let t=0;t<f.length;t+=1)f[t]&&f[t].m(r,null);e[25](n)},p(t,e){if(3972&e[0]){let n;for(g=t[9],n=0;n<g.length;n+=1){const o=V(t,g,n);f[n]?f[n].p(o,e):(f[n]=W(o),f[n].c(),f[n].m(r,null))}for(;n<f.length;n+=1)f[n].d(1);f.length=g.length}128&e[0]&&i!==(i=t[7]/2)&&p(r,"y",i),64&e[0]&&x(r,"text-decoration",t[6]),32&e[0]&&x(r,"font-style",t[5]),16&e[0]&&x(r,"font-weight",t[4]),4&e[0]&&x(r,"font-size",t[2].font_size+"px"),4&e[0]&&x(r,"font-family","'"+t[2].font+"'"),4&e[0]&&x(r,"letter-spacing",t[2].letter_spacing+"rem"),1&e[0]&&p(n,"width",t[0]),2&e[0]&&p(n,"height",t[1]),4&e[0]&&x(n,"background",t[2].background),384&e[0]&&d!==(d="0 0 "+t[8]+" "+t[7])&&p(n,"viewBox",d)},i:t,o:t,d(t){t&&s(n),c(f,t),e[25](null)}}}customElements.define("fds-image-editor-text-toolbar",class extends N{constructor(t){super();const e=document.createElement("style");e.textContent='*{box-sizing:border-box}.buttoncontainer{margin-top:10px;margin-bottom:10px;padding-bottom:5px;;;border-bottom:1px solid white}button{color:white;background-color:transparent}.editText{min-width:200px;min-height:100px;box-shadow:0 0 1rem 0 rgba(255, 255, 255, .2);border-radius:8px;background-color:rgba(0, 0, 0, .65);backdrop-filter:blur(10px);color:rgba(255, 255, 255, 0.6);position:absolute;left:150px;top:50px;padding:14px;font-family:"Segoe UI", Roboto, system-ui;z-index:2000;margin-left:100px}.formLine{displaY:block;margin-bottom:20px}.slider{vertical-align:middle}.values3{width:30px;text-align:right;display:inline-block}.formInput{width:100%;outline:0;border:0;border-bottom:2px solid rgba(255, 255, 255, 0.2);padding:5px;font-size:14px;font-weight:normal;border-radius:3px;color:rgba(255, 255, 255, 0.9);margin-bottom:10px;display:block;background:none;font-family:system-ui, "Segoe UI", Roboto}.formInput::placeholder{font-weight:normal;opacity:0.5;color:rgba(255, 255, 255, 0.7)}.formLine{margin-bottom:5px}.dropdown{position:relative;display:inline-block}.dropdown-content{display:none;position:absolute;background-color:#f1f1f1;min-width:160px;overflow:auto;box-shadow:0 8px 16px 0 rgba(0, 0, 0, 0.2);z-index:1;max-height:calc(100vh / 2);margin-top:5px;border-radius:6px}.dropdown-content a{color:black;padding:12px 16px;text-decoration:none;display:block;font-size:20px}.dropdown a:hover{background-color:#ddd}.show{display:block}.font-preview{display:inline-block;width:200px;color:black;background-color:white;font-size:20px;padding:16px;border:none;cursor:pointer;border-radius:6px}',this.shadowRoot.appendChild(e),P(this,{target:this.shadowRoot,props:b(this.attributes),customElement:!0},J,j,i,{layer:0,refresh:7},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),A()))}static get observedAttributes(){return["layer","refresh"]}get layer(){return this.$$.ctx[0]}set layer(t){this.$$set({layer:t}),A()}get refresh(){return this.$$.ctx[7]}});function X(t,e,n){return"<div "+e+' style="'+n+' font-size:33px;font-weight:bold;display:flex;align-content:space-between;justify-content:space-around;align-items: center;">T</div> '+t.name}async function Y(){return""}function K(t,e,n){let o,r=v(),{width:i=500}=e,{height:a=500}=e,{external_scene_storage:l=null}=e;var s;async function c(){let t=[];return(await async function(t=!0){let e=Array.from(document.styleSheets);const n=async t=>{let e=await fetch(t),n=await e.text(),o=document.createElement("style");o.classList.add("externalCSS");let r=document.head.querySelectorAll(".externalCSS");r.length?document.head.insertBefore(o,r[r.length-1].nextElementSibling):document.head.insertBefore(o,document.head.children[0]),o.textContent=`/** origin: ${t} **/\n`+n,d.push(t)};for(let o=0;o<e.length;o++){let r=e[o],i=r.href;if(i)await n(i);else{let e=r.cssRules,o=e.length;for(let i=0;i<o;i++){let a=e[i],l=a.type;if(3===l){let e=a.href;e&&(t&&(r.deleteRule(i),o--,i--),await n(e))}else 5===l&&d.push("local")}}}if(t){let t=document.querySelectorAll('link[href$=".css"], link[rel="stylesheet"]');for(let e=0;e<t.length;e++){let n=t[e];await n.remove()}}return Array.from(document.styleSheets)}(!0)).forEach(((e,n)=>{let o=e.cssRules;for(let e=0;e<o.length;e++){let r=o[e];if(5===r.type){let e=r.style,o=e.getPropertyValue("font-family");o=o.replaceAll('"',"");let i=e.getPropertyValue("font-weight");i=parseFloat(e.fontWeight);let a=e.getPropertyValue("font-style");a=e.fontStyle;let l=e.unicodeRange,s=e.getPropertyValue("src").split(",").map((t=>t.split(" ")[0])).filter(Boolean),c="";s.forEach((t=>{c=t.match(/\(([^)]+)\)/)[1].replaceAll('"',"")})),t.push({origin:d[n],fontFamily:o,fontWeight:i,fontStyle:a,src:c,unicodeRange:l})}}})),t}s=()=>{o&&clearTimeout(o),o=setTimeout((()=>{!function(){if(!f.id)return;let t=globalThis.gyre.layerManager.findClippingMasks(null,f.id);if(t.length)for(let e=0;e<t.length;e++)t[e].clippingMask(f)}()}),1e3)},v().$$.after_update.push(s),function(t){v().$$.on_mount.push(t)}((()=>()=>{l&&n(12,l.data=S(),l)}));let d=[];async function u(){return await g(),await g()}async function g(){let t=await async function(){let t=await c(),e="";for(let n of t)f.font===n.fontFamily&&(e=n.src);if(!e)return;let n=await fetch(e),o=await n.blob();return new Promise((t=>{let e=new FileReader;e.addEventListener("load",(()=>t(e.result))),e.readAsDataURL(o)}))}(),e="";t&&(e="<style>\n @font-face { font-family: '"+f.font+"';",e+="\nsrc: url("+t+") format('woff2');\n</style> ");let n=(new XMLSerializer).serializeToString(z);n=n.replace("<defs/>","<defs>"+e+"</defs>");const o=`data:image/svg+xml;charset=utf-8;base64,${btoa(unescape(encodeURIComponent(n)))}`,r=document.createElement("canvas");let i=new Image;return new Promise((t=>{i.addEventListener("load",(async()=>{r.width=parseInt(f.width),r.height=parseInt(f.height);r.getContext("2d").drawImage(i,0,0,f.width,f.height);const e=r.toDataURL("image/png");t(e)})),i.src=o}))}let{layer:f={string:"Hello",font_size:150,align:"middle",background:"transparent",bold:!1,italic:!1,underline:!1}}=e,h="normal",p="normal",m="none",y=1e3,x=1e3;let b,w,$=[];function _(){f.string&&(n(9,$=f.string.split("\n")),n(10,b=1.2*f.font_size),n(11,w=-b*($.length-1)/2))}function S(){let t={text:f.string,font_size:f.font_size,font:f.font,align:f.align,background:f.background};return JSON.parse(JSON.stringify(t))}let{svg:z}=e;return t.$$set=t=>{"width"in t&&n(0,i=t.width),"height"in t&&n(1,a=t.height),"external_scene_storage"in t&&n(12,l=t.external_scene_storage),"layer"in t&&n(2,f=t.layer),"svg"in t&&n(3,z=t.svg)},t.$$.update=()=>{7&t.$$.dirty[0]&&(f&&(f.align||n(2,f.align="middle",f),n(2,f),n(0,i),n(1,a)),f&&f.bold?n(4,h="bold"):n(4,h="normal"),f&&f.italic?n(5,p="italic"):n(5,p="normal"),f&&f.underline?n(6,m="underline"):n(6,m="none"),f&&f.string&&_(),f&&f.font_size&&_(),(i||a)&&function(){let t=i/a;i>a?(n(7,y=1e3/t),n(8,x=1e3)):(n(8,x=1e3/t),n(7,y=1e3))}())},[i,a,f,z,h,p,m,y,x,$,b,w,l,function(){n(2,f),n(0,i),n(1,a)},async function(t){let e=globalThis.gyre.imageAPI;globalThis.gyre.canvas,n(0,i=t.width),n(1,a=t.height),n(2,f.url=await u(),f),n(0,i=t._width),n(1,a=t._height);let o=window.document.createElement("canvas");o.width=t.width,o.height=t.height,o.getContext("2d").drawImage(await e.base64ToCanvas(f.url),t.x,t.y,t.width,t.height,0,0,t.width,t.height);let r=o.toDataURL(),l=await e.scaleImageCanvas(r,t.generate.targetWidth,t.generate.targetHeight),s={};r=await e.fillImageBackground(l,"white");let c=await e.base64ToCanvas(r);e.canvasInvert(c),s.base64=s.urlRef=c.toDataURL(),s.type="skribble",s.base64=s.base64.split(",")[1],t.specialLayersImageInfo.push(s),n(2,f.url=null,f)},function(){class t extends(globalThis.gyre.getLayerBaseClass()){font_size;string;align;bold;italic;underline;letter_spacing;font;async render(){let t=this.element.getElementsByTagName("fds-image-editor-text")[0];return await t.renderForAI()}}let e=new t;return e.type="fds-image-editor-text",e.name="Text",e.letter="T",e.background_type="transparent",e.font_size=200,e.string="TEXT",e.align="middle",e.bold=!1,e.italic=!1,e.underline=!1,e.letter_spacing=0,e.font="Josefin Sans",n(2,f=e),e},async function(){return n(2,f.data=S(),f),f},X,async function(){let t=globalThis.gyre.imageAPI,e=globalThis.gyre.canvas;n(0,i=f.width),n(1,a=f.height),n(2,f.url=await u(),f),n(0,i=f._width),n(1,a=f._height);let o=[f],r=await t.getImageDataCombined(o,0,0,e.width,e.height,{width:e.width,height:e.height},null,!0),l=await t.base64ToCanvas(r,e.width,e.height);return t.canvasMakeTransparentWhite(l),t.canvasInvert(l),l=await t.canvasExpandMaskFast(l),await l.toDataURL()},u,g,async function(){let t=r.shadowRoot.querySelector("#text");if(!t)return;let e=t.getBoundingClientRect();if(e.width>=i)for(;e.width>i;)n(2,f.font_size-=10,f),await new Promise((t=>setTimeout(t,1))),e=t.getBoundingClientRect();else{for(;e.width<i;)n(2,f.font_size+=10,f),await new Promise((t=>setTimeout(t,1))),e=t.getBoundingClientRect();n(2,f.font_size-=10,f)}},S,async function(t){n(2,f.string=t.text,f),n(2,f.font_size=t.font_size,f),n(2,f.font=t.font,f),n(2,f.align=t.align,f),n(2,f.background=t.background,f)},Y,function(t){k[t?"unshift":"push"]((()=>{z=t,n(3,z)}))}]}class Q extends N{constructor(t){super();const e=document.createElement("style");e.textContent="*{box-sizing:border-box}",this.shadowRoot.appendChild(e),P(this,{target:this.shadowRoot,props:b(this.attributes),customElement:!0},K,G,i,{width:0,height:1,external_scene_storage:12,refresh:13,prepareForAI:14,layerInstance:15,prepareForSave:16,getLayerMenuHTML:17,quickMask:18,renderForAI:19,_renderForAI:20,layer:2,autoSize:21,getScene:22,setScene:23,renderNormal:24,svg:3},null,[-1,-1]),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),A()))}static get observedAttributes(){return["width","height","external_scene_storage","refresh","prepareForAI","layerInstance","prepareForSave","getLayerMenuHTML","quickMask","renderForAI","_renderForAI","layer","autoSize","getScene","setScene","renderNormal","svg"]}get width(){return this.$$.ctx[0]}set width(t){this.$$set({width:t}),A()}get height(){return this.$$.ctx[1]}set height(t){this.$$set({height:t}),A()}get external_scene_storage(){return this.$$.ctx[12]}set external_scene_storage(t){this.$$set({external_scene_storage:t}),A()}get refresh(){return this.$$.ctx[13]}get prepareForAI(){return this.$$.ctx[14]}get layerInstance(){return this.$$.ctx[15]}get prepareForSave(){return this.$$.ctx[16]}get getLayerMenuHTML(){return X}get quickMask(){return this.$$.ctx[18]}get renderForAI(){return this.$$.ctx[19]}get _renderForAI(){return this.$$.ctx[20]}get layer(){return this.$$.ctx[2]}set layer(t){this.$$set({layer:t}),A()}get autoSize(){return this.$$.ctx[21]}get getScene(){return this.$$.ctx[22]}get setScene(){return this.$$.ctx[23]}get renderNormal(){return Y}get svg(){return this.$$.ctx[3]}set svg(t){this.$$set({svg:t}),A()}}return customElements.define("fds-image-editor-text",Q),Q}();
//# sourceMappingURL=fds-image-editor-text.js.map
