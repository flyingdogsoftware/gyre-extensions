var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function a(t){t.parentNode&&t.parentNode.removeChild(t)}function c(t){return document.createElement(t)}function u(){return t=" ",document.createTextNode(t);var t}function d(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function h(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function p(t,e,n){e in t?t[e]="boolean"==typeof t[e]&&""===n||n:h(t,e,n)}function f(t,e,n,o){null==n?t.style.removeProperty(e):t.style.setProperty(e,n,o?"important":"")}function m(t){const e={};for(const n of t)e[n.name]=n.value;return e}let $;function g(t){$=t}function b(t){(function(){if(!$)throw new Error("Function called outside component initialization");return $})().$$.on_mount.push(t)}const y=[],x=[];let _=[];const v=[],w=Promise.resolve();let E=!1;function k(t){_.push(t)}const V=new Set;let C=0;function T(){if(0!==C)return;const t=$;do{try{for(;C<y.length;){const t=y[C];C++,g(t),L(t.$$)}}catch(t){throw y.length=0,C=0,t}for(g(null),y.length=0,C=0;x.length;)x.pop()();for(let t=0;t<_.length;t+=1){const e=_[t];V.has(e)||(V.add(e),e())}_.length=0}while(y.length);for(;v.length;)v.pop()();E=!1,V.clear(),g(t)}function L(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(k)}}const S=new Set;function M(t,e){const n=t.$$;null!==n.fragment&&(!function(t){const e=[],n=[];_.forEach((o=>-1===t.indexOf(o)?e.push(o):n.push(o))),n.forEach((t=>t())),_=e}(n.after_update),o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function P(t,e){-1===t.$$.dirty[0]&&(y.push(t),E||(E=!0,w.then(T)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function A(s,i,l,c,u,d,h,p=[-1]){const f=$;g(s);const m=s.$$={fragment:null,ctx:[],props:d,update:t,not_equal:u,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(i.context||(f?f.$$.context:[])),callbacks:n(),dirty:p,skip_bound:!1,root:i.target||f.$$.root};h&&h(m.root);let b=!1;if(m.ctx=l?l(s,i.props||{},((t,e,...n)=>{const o=n.length?n[0]:e;return m.ctx&&u(m.ctx[t],m.ctx[t]=o)&&(!m.skip_bound&&m.bound[t]&&m.bound[t](o),b&&P(s,t)),e})):[],m.update(),b=!0,o(m.before_update),m.fragment=!!c&&c(m.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);m.fragment&&m.fragment.l(t),t.forEach(a)}else m.fragment&&m.fragment.c();i.intro&&((y=s.$$.fragment)&&y.i&&(S.delete(y),y.i(x))),function(t,n,s,i){const{fragment:l,after_update:a}=t.$$;l&&l.m(n,s),i||k((()=>{const n=t.$$.on_mount.map(e).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...n):o(n),t.$$.on_mount=[]})),a.forEach(k)}(s,i.target,i.anchor,i.customElement),T()}var y,x;g(f)}let H;function N(e){let n,r,s,i,h,f,m;return{c(){n=c("fds-image-editor-button"),n.innerHTML='<div class="btn">0%</div>',r=u(),s=c("fds-image-editor-button"),s.innerHTML='<div class="btn">50%</div>',i=u(),h=c("fds-image-editor-button"),h.innerHTML='<div class="btn">100%</div>',this.c=t,p(n,"class","btn"),p(n,"type","button"),p(s,"class","btn"),p(s,"type","button"),p(h,"class","btn"),p(h,"type","button")},m(t,o){l(t,n,o),l(t,r,o),l(t,s,o),l(t,i,o),l(t,h,o),f||(m=[d(n,"click",e[2]),d(s,"click",e[3]),d(h,"click",e[4])],f=!0)},p:t,i:t,o:t,d(t){t&&a(n),t&&a(r),t&&a(s),t&&a(i),t&&a(h),f=!1,o(m)}}}function O(t,e,n){let{tool_layer:o}=e;return t.$$set=t=>{"tool_layer"in t&&n(0,o=t.tool_layer)},[o,function(){n(0,o)},()=>{n(0,o.component.sliderValue=0,o),o.component.updateSlider()},()=>{n(0,o.component.sliderValue=50,o),o.component.updateSlider()},()=>{n(0,o.component.sliderValue=100,o),o.component.updateSlider()}]}"function"==typeof HTMLElement&&(H=class extends HTMLElement{constructor(){super(),this.attachShadow({mode:"open"})}connectedCallback(){const{on_mount:t}=this.$$;this.$$.on_disconnect=t.map(e).filter(r);for(const t in this.$$.slotted)this.appendChild(this.$$.slotted[t])}attributeChangedCallback(t,e,n){this[t]=n}disconnectedCallback(){o(this.$$.on_disconnect)}$destroy(){M(this,1),this.$destroy=t}$on(e,n){if(!r(n))return t;const o=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return o.push(n),()=>{const t=o.indexOf(n);-1!==t&&o.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}});function R(e){let n,r,s,u,p,m;return{c(){n=c("div"),r=c("div"),s=c("div"),u=c("div"),this.c=t,h(u,"class","slider-button"),h(s,"class","slider-handle"),f(s,"left",e[0]+"%"),f(s,"height",e[3]+"px"),h(r,"class","canvas"),f(r,"width",e[2]+"px"),f(r,"height",e[3]+"px"),h(n,"class","slider-container"),f(n,"width",e[2]+"px"),f(n,"height",e[3]+"px")},m(t,o){l(t,n,o),i(n,r),i(r,s),i(s,u),e[11](r),p||(m=[d(r,"mousedown",e[4]),d(r,"mouseup",e[5]),d(r,"mouseleave",e[5]),d(r,"mousemove",e[6])],p=!0)},p(t,[e]){1&e&&f(s,"left",t[0]+"%"),8&e&&f(s,"height",t[3]+"px"),4&e&&f(r,"width",t[2]+"px"),8&e&&f(r,"height",t[3]+"px"),4&e&&f(n,"width",t[2]+"px"),8&e&&f(n,"height",t[3]+"px")},i:t,o:t,d(t){t&&a(n),e[11](null),p=!1,o(m)}}}function j(t,e,n){let o,r,s,i,{sliderValue:l=50}=e,a=!1,{tool_layer:c}=e;function u(){n(10,r.style.clipPath=`inset(0 ${100-l}% 0 0)`,r)}return b((()=>()=>{r.style.removeProperty("clip-path")})),t.$$set=t=>{"sliderValue"in t&&n(0,l=t.sliderValue),"tool_layer"in t&&n(7,c=t.tool_layer)},t.$$.update=()=>{1024&t.$$.dirty&&r&&u()},[l,o,s,i,function(){a=!0},function(){a=!1},function(t){if(a&&o){let e=o.mouseCoords(t);const r=parseInt(e.x);n(0,l=r/o.width*100),n(0,l=Math.max(0,Math.min(100,l))),u()}},c,u,function(){globalThis.gyre&&globalThis.gyre.paletteValues&&globalThis.gyre.paletteValues.selectedLayer&&(n(10,r=globalThis.gyre.paletteValues.selectedLayer.element.getElementsByTagName("img")[0]),n(1,o=globalThis.gyre.canvas),n(2,s=o.calcPosition(o.width)),n(3,i=o.calcPosition(o.height)))},r,function(t){x[t?"unshift":"push"]((()=>{o=t,n(1,o)}))}]}customElements.define("fds-image-editor-compare-floating-toolbar",class extends H{constructor(t){super();const e=document.createElement("style");e.textContent=".btn{width:40px;text-align:center}",this.shadowRoot.appendChild(e),A(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},O,N,s,{tool_layer:0,refresh:1},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["tool_layer","refresh"]}get tool_layer(){return this.$$.ctx[0]}set tool_layer(t){this.$$set({tool_layer:t}),T()}get refresh(){return this.$$.ctx[1]}});class z extends H{constructor(t){super();const e=document.createElement("style");e.textContent=".slider-container{position:absolute;margin:0 auto;left:0;top:0}.canvas{position:relative;overflow:hidden;cursor:col-resize;user-select:none}.slider-handle{position:absolute;top:0;bottom:0;width:3px;background:white;cursor:col-resize}.slider-button{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);width:20px;height:20px;background:white;border:2px solid #000;border-radius:50%;box-shadow:0 0 5px rgba(0, 0, 0, 0.5)}.slider-button::before{left:25%;transform:translateY(-50%) rotate(-45deg)}.slider-button::after{right:25%;transform:translateY(-50%) rotate(45deg)}",this.shadowRoot.appendChild(e),A(this,{target:this.shadowRoot,props:m(this.attributes),customElement:!0},j,R,s,{sliderValue:0,tool_layer:7,updateSlider:8,refresh:9},null),t&&(t.target&&l(t.target,this,t.anchor),t.props&&(this.$set(t.props),T()))}static get observedAttributes(){return["sliderValue","tool_layer","updateSlider","refresh"]}get sliderValue(){return this.$$.ctx[0]}set sliderValue(t){this.$$set({sliderValue:t}),T()}get tool_layer(){return this.$$.ctx[7]}set tool_layer(t){this.$$set({tool_layer:t}),T()}get updateSlider(){return this.$$.ctx[8]}get refresh(){return this.$$.ctx[9]}}return customElements.define("fds-image-editor-compare",z),z}();
//# sourceMappingURL=fds-image-editor-compare.js.map
